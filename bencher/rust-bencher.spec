# Generated by rust2rpm
%bcond_without check
%global debug_package %{nil}

%global crate bencher

Name:           rust-%{crate}
Version:        0.1.2
Release:        1%{?dist}
Summary:        Port of the libtest (unstable Rust) benchmark runner to Rust stable releases

License:        MIT or ASL 2.0
URL:            https://crates.io/crates/bencher
Source0:        https://crates.io/api/v1/crates/%{crate}/%{version}/download#/%{crate}-%{version}.crate

ExclusiveArch:  %{rust_arches}

BuildRequires:  rust
BuildRequires:  cargo

%description
%{summary}.

%package        devel
Summary:        %{summary}
BuildArch:      noarch

%description    devel
A port of the libtest (unstable Rust) benchmark runner to Rust stable releases.
Supports running benchmarks and filtering based on the name. Benchmark
execution works exactly the same way and no more (caveat: black_box is still
missing!).

This package contains library source intended for building other packages
which use %{crate} from crates.io.

%prep
%autosetup -n %{crate}-%{version} -p1
%cargo_prep

%build
%cargo_build

%install
%cargo_install

%if %{with check}
%check
%cargo_test
%endif

%files          devel
%license LICENSE-MIT LICENSE-APACHE
%doc README.rst
%{cargo_registry}/%{crate}-%{version}/

%changelog
* Sat Feb 18 2017 Igor Gnatenko <ignatenkobrain@fedoraproject.org> - 0.1.2-1
- Initial package
